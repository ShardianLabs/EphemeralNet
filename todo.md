# EphemeralNet TODO

## Current status
- CMake structure with base libraries and executables is in place.
- In-memory implementations of `ChunkStore`, `Node`, and `KademliaTable` now operate over the real secure transport.
- ChaCha20 symmetric encryption is integrated in `Node` and `ChunkStore` with ephemeral key management.
- Smoke test validates local chunk expiration and recovery after decryption.
- Protocol layers with Announce/Request/Chunk/Acknowledge messages and verified binary serialisation.
- Kademlia table implements LRU buckets, XOR distance, and closest-neighbour queries.
- Message authentication via HMAC-SHA256 with signing/verification helpers.
- Automatic rotation of session keys derived with HMAC-SHA256 (`KeyManager`).
- Initial key exchange based on Diffie-Hellman plus per-peer reputation tracking.
- TTL audit reporting cross-checks storage and DHT expirations.
- Cleanup manager synchronises local expirations and DHT announcement withdrawal.
- End-to-end encrypted TCP transport replaces the simulated `SessionManager`.
- Build and `ctest` succeed on MinGW-w64.
- Shamir n-of-m key sharing library with reconstruction unit tests.
- `eph://` manifest format with Base64 encode/decode and round-trip test.
- Kademlia table extended to publish and expire shard metadata with TTL.
- Shamir key sharing pipeline integrates chunk key generation, manifest creation, and DHT publication.
- `eph://` manifest ingestion and validation with key reconstruction and replicated local storage.
- Encrypted chunk request/delivery flow across peers with secure transport and signed acknowledgements.
- DHT bootstrapping with seed nodes and initial key negotiation.
- Real STUN-backed NAT traversal with relay diagnostics integrated into `Node`.
- Daemon auto-detects control-plane advertise candidates via STUN/HTTPS echo probes at startup.
- Auto-advertise detection filters private/unroutable endpoints unless operators opt-in via `--control-expose` or `--advertise-allow-private`.
- Auto-advertise detection preserves all conflicting gateway/interface results and surfaces structured warnings in daemon logs and CLI output.
- Transport auto-advertise now derives routable endpoints from STUN data even when the control plane stays on loopback, so zero-config nodes remain reachable without exposing `--advertise-control` unless operators explicitly pin it (still honouring `--advertise-auto`).
- Discovery hints now always include auto-advertised data-plane (`transport/tcp`) endpoints alongside manually pinned `control` contacts, so manifests expose both schemes for future transport bootstrap flows.
- CLI fetch exposes `--transport-only` (force transport/tcp hints) and `--control-fallback` (skip transport) so operators can pin the desired discovery mode.
- SwarmCoordinator distributes manifests/shards with replication and rebalance plans.
- Optional persistent on-disk storage with secure TTL-driven wipe.
- Node CLI exposes `serve`, `store`, `fetch`, and `list` over the `Node` API.
- Decoupled CLI/daemon: `eph` drives the control plane with `start`, `stop`, `status`, and end-to-end launch/stop tests.
- Announce messages propagate manifest URIs and shard assignments with verified serialisation/decoding.
- SwarmCoordinator orchestrates `eph://` manifest broadcast with metadata validation and secure contact onboarding.
- Assigned fetches retry with exponential backoff, scheduled from `tick()` with pending-state cleanup.
- Fetch scheduler prioritises manifest expiry, enforces configurable concurrency, and balances per-peer requests.
- Fetch planning applies rarest-first backed by periodic availability refresh and provider counts per chunk.
- Upload choking/unchoking honours global and per-peer limits, transfer timeouts, and fair rotation.
- Seed/leecher roles tracked per chunk via `Node` ledger with multi-node transition test coverage.
- Multi-peer planning weighs availability, load, and historical roles to distribute shards fairly across the swarm and avoid choked peers.
- Protocol message version negotiation with downgrade handling and regression tests.
- Deterministic fuzz harnesses guard protocol message and manifest deserialisation paths under `ctest`.
- CLI now includes interactive confirmations (`--yes` for automation), structured error reporting, and daemon-supplied hints/codes.
- CLI validates storage directory, control host/port, peer id, default TTL, and fetch/store paths with actionable errors and regression coverage.
- CLI surfaces daemon-provided hints after successful commands to guide follow-up actions.
- CLI loads layered JSON/YAML configuration files with profile inheritance and per-environment overrides, backed by regression tests.
- Ops playbooks for bootstrap and STUN deployment via systemd on Ubuntu VPS (config, service unit, hardening guidance).
- Control-plane streaming enforces authentication tokens and per-identity rate limits across `store` uploads and `fetch` downloads.
- CLI commands expose dedicated `--help` summaries (`store`, `fetch`, `list`, `status`, `start`, `stop`, `serve`).
- Added an MIT `LICENSE` file.
- Translated public-facing documentation to English (README, this TODO).
- Handshake path now enforces configurable proof-of-work with helper APIs for CLI/daemon integration and updated regression coverage.
- CLI output, hints, and tests localised to English with compatibility for scripted confirmations.
- Authored architecture, protocol, deployment, and troubleshooting guides under `docs/`.
- CLI fetch now defaults to the working directory (preserving stored filename metadata) with user-overridable directory/name settings and exposes a `defaults` command to report daemon TTL/configuration baselines.
- CLI exposes `--version` and an integrated `man` command for quick reference.
- CLI surfaces configurable key rotation via `--key-rotation`, reports the active interval in `defaults`, and documents TTL/key rotation guardrails for operators.
- CLI exposes configurable announce rate limiting (interval, burst, window, PoW) with validation, defaults reporting, and documentation updates for operator hardening.
- CLI/daemon now surface `--advertise-auto=on|warn|off`, persist the merged advertised endpoint list (manual + auto), and print the active mode plus endpoints through `eph defaults` for easier audits.
- Stored manifests reuse the aggregated advertised endpoint ordering (auto-discovered transport endpoints first, manual control fallbacks next) so direct connections are attempted before control-plane bootstrap; regression tests assert the ordering.
- Bootstrap gossip now reuses the aggregated advertised endpoint list so direct-only peers immediately learn all routable control-plane contacts, and per-peer deliveries are tracked for diagnostics/tests.
- Operator runbooks now include concrete port-forwarding and relay troubleshooting checklists plus privacy trade-off guidance so teams can justify how they expose advertised endpoints.
- CLI reference and status/start flows document the auto-advertise lifecycle, including warning operators when no public endpoint is available and how to troubleshoot.
- Authored `docs/performance-tuning.md` with sizing recommendations, announce throttle baselines, observability checkpoints, and capacity planning guidance (referenced from README and ops playbooks).
- Established governance and acceptable-use policy for public bootstrap/STUN infrastructure (`docs/governance-and-aaup.md`) and linked it from operator runbooks.
- Control-plane daemon emits structured JSON logs and exposes Prometheus-style counters via the `METRICS` command for observability.
- Added a deterministic multi-node integration harness that simulates bounded latency and intentional packet loss to validate end-to-end chunk replication under degraded conditions.
- Automated end-to-end store/fetch scenarios with induced failures and plan rotation inside the multi-node harness.
- Reviewed crypto hardening levers (key rotation cadence, TTL bounds, announce throttles) using soak metrics and tuned defaults/documentation accordingly.
- Anti-Sybil defences enforce PoW across handshake/store/announce paths with CLI/daemon helpers, abuse heuristics, metrics, and bundled Prometheus/Grafana alerting assets.
- Manifest-only fetch bootstrapper shipped (schema extensions, CLI bootstrap flow, and cross-platform docs/tests) together with `--control-expose`/`--control-loopback` safeguards for daemon binding on VPS deployments.
- Introduced a `scheme`/`transport` pair on `protocol::DiscoveryHint`, updated manifest encode/decode, and taught the CLI/docs/tests to use it.

## Next milestones
- **OPS & OBSERVABILITY**
	- Prepare deployment scripts and CI/CD pipelines for Windows/Linux/macOS (Docker, PPA/Copr, Homebrew).
	- Manage reproducible packaging and binary signing.
	- Review governance and abuse policy effectiveness quarterly; feed incident learnings back into the runbook.
	- Configure Apple notarization workflow and Windows Authenticode signing inside CI.
- **PRODUCT**
	- Complete the public `libephemeralnet` API (versioning, documentation, usage examples).
	- Finalise `ephemeralnet-cli` with diagnostics commands and scripting support.
	- Prototype an initial `ephemeralnet-GUI` or lightweight admin panel.
	- Implement a version-check endpoint (JSON hosted on GitHub Pages) and wire an `eph update-check` command.
- **DOCS**
	- Publish a versioned API reference for developers embedding `libephemeralnet`.
	- Expand operator runbooks with performance tuning and capacity planning guidance.
	- Author a contributor guide and code of conduct for the project.
- **TESTING & VALIDATION**
	- Schedule manual hostile-network P2P validation (e.g., 4G mobile vs. corporate Wi-Fi segments).
